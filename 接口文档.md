# 智洐校园接口文档

> 注意返回值: 200 代表成功 201代表失败

> 请求base_url：http://127.0.0.1/api/

> 请求头皆需要字段 `Authorization: token值` 用于身份认证

## 1. 程序总后台

### 1.1 系统设置

#### 1.1.1 推送消息

接口说明：

> 设置推送通知的内容和时间，也可以根据用户标签分组推送

接口地址：

> http://127.0.0.1/api/system/pushMsg

返回格式：

> json

请求方式：

> HTTP POST

请求示例：

> http://127.0.0.1/api/system/pushMsg

请求参数：

|   名称   | 必填 |  类型  |                 说明                 |
| :------: | :--: | :----: | :----------------------------------: |
| pushType |  是  | string | 控制推送的类型，每种类型的效果不一样 |
|  uGroup  |  是  | string |          推送消息给哪个用户          |
| content  |  是  | string |              传递的信息              |

请求示例：

```json
{
    "pushType": "推送类型",
	"uGroup": "用户组",
	"content": "推送内容"
}
```



返回参数说明：

| 名称         | 类型 |                说明                 |
| ------------ | :--: | :---------------------------------: |
| JSON返回示例 | JSON | 返回json格式数据，成功返回200状态码 |

JSON返回示例：

```json
{
  "code": 200, 
  "msg": "OK",
}
```

#### 1.1.2 增加内容(没有用户端，暂时不实现)

接口地址：

> http://127.0.0.1/api/system/addContent

返回格式：

> json

请求方式：

> HTTP POST

请求示例：

> http://127.0.0.1/api/system/addContent

请求参数：

|  名称   | 必填 |  类型  |     说明     |
| :-----: | :--: | :----: | :----------: |
| module  |  是  |  json  | 内容所属模块 |
|  type   |  是  | string |   内容类型   |
| content |  是  |  json  |  传递的信息  |

请求示例：

```json
{
    "module": "help",
    "type": "img",
    "content": "图片地址"
}
```



返回参数说明：

| 名称         | 类型 |                说明                 |
| ------------ | :--: | :---------------------------------: |
| JSON返回示例 | JSON | 返回json格式数据，失败返回201状态码 |

JSON返回示例：

```json
{
  "code": 201, 
  "msg": "提示错误消息",
}
```

#### 1.1.3 删除内容(没有用户端，暂时不实现)

接口地址：

> http://127.0.0.1/api/system/delContent

返回格式：

> json

请求方式：

> HTTP POST

请求示例：

> http://127.0.0.1/api/system/delContent

请求参数：

|  名称   | 必填 |  类型  |     说明     |
| :-----: | :--: | :----: | :----------: |
| module  |  是  |  json  | 内容所属模块 |
|  type   |  是  | string |   内容类型   |
| content |  是  |  json  |  传递的信息  |

请求示例：

```json
{
    "module": "help",
    "type": "img",
    "content": "图片地址"
}
```



返回参数说明：

| 名称         | 类型 |                说明                 |
| ------------ | :--: | :---------------------------------: |
| JSON返回示例 | JSON | 返回json格式数据，失败返回201状态码 |

JSON返回示例：

```json
{
  "code": 201, 
  "msg": "提示错误消息",
}
```



#### 1.1.4 修改内容(没有用户端，暂时不实现)

#### 1.1.5 更新内容(没有用户端，暂时不实现)



#### 1.1.6 系统设置

接口说明：

> 设置当前的一些基本参数，例如系统语言、时区、系统通知等

接口地址：

> http://127.0.0.1/api/system/config

返回格式：

> json

请求方式：

> HTTP POST

请求示例：

> http://127.0.0.1/api/system/config

请求参数：

|  名称   | 必填 |  类型  |              说明              |
| :-----: | :--: | :----: | :----------------------------: |
|  type   |  是  | string | 设置什么(语言、时区、系统通知) |
| content |  是  |  json  |            设置的值            |

请求示例：

```json
// 这是三次不同的请求
// 设置语言为英语
{
	"type": "lang",
    "content": "en"
}
// 设置时区为北京
{
	"type": "time",
    "content": "beijing"
}
// 设置系统通知
{
	"type": "systemMsg",
    "content": "通知消息"
}
```

返回参数说明：

| 名称         | 类型 |                说明                 |
| ------------ | :--: | :---------------------------------: |
| JSON返回示例 | JSON | 返回json格式数据，失败返回201状态码 |

JSON返回示例：

```json
// 返回处理结果，若成功则刷新当前页面，后端根据token返回对应数据
{
  "code": 200, 
  "msg": "OK",
}
```

#### 1.1.7 安全管理

接口说明：

> 账户安全设置，例如设置密码复杂度、开启多因素认证等

接口地址：

> http://127.0.0.1/api/system/safeSee

返回格式：

> json

请求方式：

> HTTP POST

请求示例：

> http://127.0.0.1/api/system/safeSee

请求参数：

| 名称 | 必填 |  类型  |                 说明                 |
| :--: | :--: | :----: | :----------------------------------: |
| type |  是  | string | 设置什么(密码复杂度、开启多因素认证) |
| data |  是  |  json  |               设置的值               |

请求示例：

```json
// 这是几次不同的请求
// 设置所有用户密码复杂度为高，弱密码禁止使用
{
	"type": "crypto",
    "data": "high"
}
// 开启手机认证(账号必须绑定手机号)
{
    "type": "phone",
    "data": true
}
// 开启实名认证(必须实名才能发言)
{
    "type": "real-name",
    "data": true
}
```

返回参数说明：

| 名称         | 类型 |                说明                 |
| ------------ | :--: | :---------------------------------: |
| JSON返回示例 | JSON | 返回json格式数据，失败返回201状态码 |

JSON返回示例：

```json
// 返回处理结果
{
  "code": 200, 
  "msg": "OK",
}
```

#### 1.1.8 获取用户反馈

接口说明：

> 获取用户反馈列表

接口地址：

> http://127.0.0.1/api/system/getUserFeeds

返回格式：

> json

请求方式：

> HTTP GET

请求示例：

> http://127.0.0.1/api/system/getUserFeeds

请求参数：无

返回参数说明：

| 名称         | 类型 |                说明                 |
| ------------ | :--: | :---------------------------------: |
| JSON返回示例 | JSON | 返回json格式数据，失败返回201状态码 |

JSON返回示例：

```json
// 返回用户反馈信息
{
    "code": 200, 
    "msg": "OK",
    "data": [
        // 反馈列表
        {
            "uid": 1,
            "feed": "反馈的信息"
        },
        {
            "uid": 2,
            "feed": "反馈的信息"
        },
        {
            "uid": 3,
            "feed": "反馈的信息"
        },
    ]
}
```

#### 1.1.9 处理用户反馈

接口说明：

> 处理或回复用户反馈

接口地址：

> http://127.0.0.1/api/system/dealUserFeeds

返回格式：

> json

请求方式：

> HTTP POST

请求示例：

> http://127.0.0.1/api/system/dealUserFeeds

请求参数：

| 名称 | 必填 |  类型  |                   说明                   |
| :--: | :--: | :----: | :--------------------------------------: |
| uid  |  是  | string |                  用户id                  |
| type |  是  | string | 如何处理用户反馈，可以设置忽略，或者回复 |
| data |  否  | string |                 处理内容                 |

请求示例：

```json
// 这是几次不同的请求
// 回复用户反馈
{
    "uid": 1,
    "type": "reply",
    "data": "回复内容"
}
// 忽略用户反馈
{
    "uid": 1,
    "type": "ignore",
}
```

返回参数说明：

| 名称         | 类型 |                说明                 |
| ------------ | :--: | :---------------------------------: |
| JSON返回示例 | JSON | 返回json格式数据，失败返回201状态码 |

JSON返回示例：

```json
// 返回处理结果
{
    "code": 200, 
    "msg": "OK"
}
```

#### 1.1.10 获取系统管理后台登录记录

接口说明：

> 获取系统管理后台登录记录

接口地址：

> http://127.0.0.1/api/system/getLoginLog

返回格式：

> json

请求方式：

> HTTP GET

请求示例：

> http://127.0.0.1/api/system/getLoginLog

请求参数：

| 名称  | 必填 |  类型  |                      说明                      |
| :---: | :--: | :----: | :--------------------------------------------: |
| limit |  否  | number | 每组多少个数据，不传则为每组10条数据，分页用的 |

请求示例：

```json
// 这是几次不同的请求
// 获取登录记录，不传递limit参数，默认每页十条
{
    
}
// 传递limit参数，设置每页十五条数据
{
    "limit": 15
}
```

返回参数说明：

| 名称         | 类型 |                说明                 |
| ------------ | :--: | :---------------------------------: |
| JSON返回示例 | JSON | 返回json格式数据，失败返回201状态码 |

JSON返回示例：

```json
// 返回查询结果
{
    "code": 200, 
    "msg": "OK",
    "data": [
        [
        	// 第一页，每一页默认10条
            {
                "aid": 1, // 管理员id
                "date": "2023-4-25 23:45", // 登录时间
                "addr": "湖北" // 地点
            },
            { "aid": 1 , "date": "2023-4-25 23:45" , "addr": "湖北"},
            { "aid": 1 , "date": "2023-4-25 23:45" , "addr": "湖北"},
            { "aid": 1 , "date": "2023-4-25 23:45" , "addr": "湖北"},
            { "aid": 1 , "date": "2023-4-25 23:45" , "addr": "湖北"},
            { "aid": 1 , "date": "2023-4-25 23:45" , "addr": "湖北"},
            { "aid": 1 , "date": "2023-4-25 23:45" , "addr": "湖北"},
            { "aid": 1 , "date": "2023-4-25 23:45" , "addr": "湖北"},
            { "aid": 1 , "date": "2023-4-25 23:45" , "addr": "湖北"},
            { "aid": 1 , "date": "2023-4-25 23:45" , "addr": "湖北"},
        ]
    ]
}
```



### 1.2 用户管理

#### 1. 用户

###### 1.1 用户列表接口

接口说明：

> 把用户信息展示到后台

接口地址：

> http://127.0.0.1/api/user_list

返回格式：

> json

请求方式：

> HTTP POST

请求示例：

> http://127.0.0.1/api/user_list

请求参数：

> 没有参数，直接进行axios请求，返回用户数据

返回参数说明：

| 名称         | 类型 |                说明                 |
| ------------ | :--: | :---------------------------------: |
| JSON返回示例 | JSON | 返回json格式数据，成功返回200状态码 |

JSON返回示例：

```json
 {
  "code": 200,
  "msg": "成功",
  "data": {   // 返回到前端的数据
    "group": [
      {
        "group_id": 1,
        "group_name": "管理",
        "status": 1,
        "time_add": 1564124524,
        "rights": "[1,100,2,101,1000,1001,102,1002,1004,1003]"
      },
     "user": [
      {
        "uid": 1,
        "account": "428188207@qq.com",
        "password": "e10adc3949ba59abbe56e057f20f883e",
        "name": "ouyangke",
        "phone": "428188207",
        "qq": "428188207",
        "sex": 1,
        "group_id": 1,
        "times_login": 322,
        "status": 1,
        "time_add": 1564124524,
        "time_last": 1642129024,
        "status_s": "开启",
        "group": "管理"
      },
 }
}
```

###### 1.2 用户添加修改

接口说明：

> 添加管理用户

接口地址：

> http://127.0.0.1/api/user_add

返回格式：

> json

请求方式：

> HTTP POST

请求示例：

> http://127.0.0.1/api/user_add

请求示例：

```json
{ 
 "account": "sdf",   // 账号
 "group_id": 7,     // 所属用户组
 "name": "dasgfsdf",  // 姓名
 "password": "dsfgsd",  // 密码
 "phone": "adgfsdf",   // 电话
 "qq": "asdfg",     // qq
 "status": 1,     // 状态
 "ticket": "\"u8dCIygJIYp1izhLjdBtpzMlY6g1baTq\"", // token值
 "uid": 0   // 用户id
}
```



返回参数说明：

| 名称         | 类型 |                说明                 |
| ------------ | :--: | :---------------------------------: |
| JSON返回示例 | JSON | 返回json格式数据，成功返回200状态码 |

JSON返回示例：

```json
{
    "code": 200,
    "msg": "成功",
  	 "data":{     
     "user": [
        {
        "uid":1,
        "account":"428188207@qq.com",    	              	                                 "password":"dsgsdfhgfdhjgf",
        "name":"123",
        "phone":"428188207",
        "qq":"428188207",
        "sex":1,
        "group_id":1,
        "times_login":322,
        "status":1,
        "time_add":1564124524,
        "time_last":1642129024,
        "status_s":"开启",
        "time_add_s":"2019-07-26 15:02:04",
        "group":"管理"}
}
         }
```

###### 1.3 删除用户

接口说明：

> 删除管理用户

接口地址：

> http://127.0.0.1/api/user_del

返回格式：

> json

请求方式：

> HTTP POST

请求示例：

> http://127.0.0.1/api/user_del

请求参数：

| 名称 | 必填 | 类型 |  说明  |
| :--: | :--: | :--: | :----: |
| uid  |  是  | int  | 用户id |

请求示例：

```json
{
    uid:1
}
```



返回参数说明：

| 名称         | 类型 |                说明                 |
| ------------ | :--: | :---------------------------------: |
| JSON返回示例 | JSON | 返回json格式数据，成功返回200状态码 |

JSON返回示例：

```json
{
  "code": 200, 
  "msg": "OK",
   data：{}
}
```

#### 2. 管理组

###### 2.1 管理组列表接口

接口说明：

> 把用户组信息展示到后台

接口地址：

> http://127.0.0.1/api/group_list

返回格式：

> json

请求方式：

> HTTP POST

请求示例：

> http://127.0.0.1/api/group_list

请求参数：

> 没有参数，直接进行axios请求，返回用户数据

请求示例：



返回参数说明：

| 名称         | 类型 |                说明                 |
| ------------ | :--: | :---------------------------------: |
| JSON返回示例 | JSON | 返回json格式数据，成功返回200状态码 |

JSON返回示例：

```json
 {
  "code": 200,
  "msg": "成功",
  "data": {
    "group": [
      {
        "group_id": 1,
        "group_name": "管理",
        "status": 1,
        "time_add": 1564124524,
        "rights": "[1,100,2,101,1000,1001,102,1002,1004,1003]"
      },
     ]
     menu:{}
 }
}
```



###### 2.2 管理组添加与修改

接口说明：

> 管理组添加与修改，根据前端传入的id的值判断是添加还是修改

接口地址：

> http://127.0.0.1/api/group_add

返回格式：

> json

请求方式：

> HTTP POST

请求示例：

> http://127.0.0.1/api/group_add

请求参数：

> 没有参数，直接进行axios请求，返回用户数据

请求示例：

```json
{
    "group_id": 1,
     "group_name": "管理",
     "status": 1,
     "time_add": 1564124524,
     "rights": "[1,100,2,101,1000,1001,102,1002,1004,1003]"  // 权限
}
```



返回参数说明：

| 名称         | 类型 |                说明                 |
| ------------ | :--: | :---------------------------------: |
| JSON返回示例 | JSON | 返回json格式数据，成功返回200状态码 |

JSON返回示例：

```json
 {
  "code": 200,
  "msg": "成功",
  "data": {}
}
```



###### 2.3 管理组删除

接口说明：

> 删除某个管理组

接口地址：

> http://127.0.0.1/api/group_del

返回格式：

> json

请求方式：

> HTTP POST

请求示例：

> http://127.0.0.1/api/group_del

请求参数：

> 没有参数，直接进行axios请求，返回用户数据

请求示例：

```json
{
    "group_id":1
}
```



返回参数说明：

| 名称         | 类型 |                说明                 |
| ------------ | :--: | :---------------------------------: |
| JSON返回示例 | JSON | 返回json格式数据，成功返回200状态码 |

JSON返回示例：

```json
 {
  "code": 200,
  "msg": "成功",
  "data": {}
}
```

#### 3. 菜单

###### 3.1 菜单列表

接口说明：

> 展示管理菜单

接口地址：

> http://127.0.0.1/api/menu_list

返回格式：

> json

请求方式：

> HTTP POST

请求示例：

> http://127.0.0.1/api/menu_list

请求参数：

> 没有参数，直接进行axios请求，返回用户数据

请求示例：

返回参数说明：

| 名称         | 类型 |                说明                 |
| ------------ | :--: | :---------------------------------: |
| JSON返回示例 | JSON | 返回json格式数据，成功返回200状态码 |

JSON返回示例：

```json
{
  "code": 200,
  "msg": "成功",
  "data": [  // 返回的数据
    {
      "mid": 1,
      "parent_id": 0,
      "label": "项目核心",
      "type": 0,
      "src": "",
      "icon_class": "Key",
      "sort": 999999,
      "status": 1,
      "status_s": "开启",
      "type_s": "分组"
    },
    {
      "mid": 100,
      "parent_id": 0,
      "label": "系统配置",
      "type": 0,
      "src": null,
      "icon_class": "Setting",
      "sort": 888888,
      "status": 1,
      "status_s": "开启",
      "type_s": "分组"
    }
    ]
}
```



###### 3.2 菜单添加

接口说明：

> 菜单添加

接口地址：

> http://127.0.0.1/api/menu_add

返回格式：

> json

请求方式：

> HTTP POST

请求示例：

> http://127.0.0.1/api/menu_add

请求示例：

```json
[
    {
     "mid":1,
     "parent_id":0,
        "label":"项目核心", // 菜单名称
        "type":0,    // 菜单类型
        "src":"",   // 菜单路由
        "status":1,   // 菜单状态
        "type_s":"分组"  // 菜单所属组
    }
]
```

返回参数说明：

| 名称         | 类型 |                说明                 |
| ------------ | :--: | :---------------------------------: |
| JSON返回示例 | JSON | 返回json格式数据，成功返回200状态码 |

JSON返回示例：

```json
{
  "code": 200,
  "msg": "成功",
  "data": []
}
```



###### 3.3 菜单删除

接口说明：

> 删除菜单

接口地址：

> http://127.0.0.1/api/menu_del

返回格式：

> json

请求方式：

> HTTP POST

请求示例：

> http://127.0.0.1/api/menu_del

请求参数：

> 没有参数，直接进行axios请求，返回用户数据

请求示例：

```json
{
    "mid":1
}
```

返回参数说明：

| 名称         | 类型 |                说明                 |
| ------------ | :--: | :---------------------------------: |
| JSON返回示例 | JSON | 返回json格式数据，成功返回200状态码 |

JSON返回示例：

```json
{
  "code": 200,
  "msg": "成功",
  "data": []
}
```



#### 4. 登录与权限管理

接口说明：

> 用户登录

接口地址：

> http://127.0.0.1/api/login

返回格式：

> json

请求方式：

> HTTP POST

请求示例：

> http://127.0.0.1/api/login

请求参数：

> 没有参数，直接进行axios请求，返回用户数据

请求示例：

```json
{
    "account":'ouyangke',
    "password":'123456'
}
```

返回参数说明：

| 名称         | 类型 |                说明                 |
| ------------ | :--: | :---------------------------------: |
| JSON返回示例 | JSON | 返回json格式数据，成功返回200状态码 |

JSON返回示例：

```json
{
    "code": 200,
    "msg": "成功",
    "data":{
        "account":"428188207@qq.com",
        "userId": "1",
        "name":"sdc",
        "phone":"428188207",
        "qq":"428188207",
        "sex":1,
        "group_id":1,
        "ticket":"q79tvfsHCbqfl_htj-uTSs56YP46zQLi"
    }
}
```



